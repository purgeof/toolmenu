<!DOCTYPE html>
<html lang="zh-TW">
<head>
<meta charset="UTF-8">
<title>學生資料填寫</title>
<style>
  body { font-family: Arial, sans-serif; padding: 20px; background-color: #f8f9fa; }
  label { display: block; margin-top: 15px; font-weight: bold; }
  .indent { margin-left: 20px; }
  input[type="text"], input[type="tel"], select {
    padding: 6px; font-size: 1em; width: 250px; max-width: 100%;
  }
  button { margin-top: 20px; padding: 10px 18px; background: #0069d9; color: white; border: none; border-radius: 5px; cursor: pointer; }
  button:hover { background: #0053ba; }
  #successMessage { display: none; margin-top: 20px; padding: 10px; background: #28a745; color: white; text-align: center; border-radius: 5px; }
</style>
</head>
<body>

<h2>學生資料填寫表單</h2>

<form id="studentForm">
  <!-- 學生姓名 -->
  <label>1. 學生姓名:</label>
  <input type="text" name="studentName" required>

  <!-- 午餐繳費方式 -->
  <label>2.本學期午餐繳費方式</label>
  <div class="indent">
    <label><input type="radio" name="lunchPayment" value="全繳（與註冊費一起繳交）" required> 全繳（與註冊費一起繳交）</label>
    <label><input type="radio" name="lunchPayment" value="月繳"> 月繳</label>
    <label><input type="radio" name="lunchPayment" value="領有午餐補助證明"> 領有午餐補助證明</label>
  </div>

  <!-- 午餐乳品 -->
  <label>3.本學期午餐飲用的?</label>
  <div class="indent">
    <label><input type="radio" name="milkType" value="牛奶" required> 牛奶</label>
    <label><input type="radio" name="milkType" value="豆漿"> 豆漿</label>
    <label><input type="radio" name="milkType" value="不飲用"> 不飲用</label>
  </div>

  <!-- 放學接送方式 -->
  <label>4.本學期放學接送方式</label>
  <div class="indent">
    <label><input type="radio" name="pickupMethod" value="家長接送" required> 家長接送</label>
    <label><input type="radio" name="pickupMethod" value="安親班" id="cramSchoolOption"> 安親班</label>
    <div id="afterSchoolFields" style="display:none; margin-left:20px;">
      <label>「安親班」-名稱</label>
      <input type="text" name="cramSchoolName">
      <label>「安親班」-電話</label>
      <input type="tel" name="cramSchoolPhone">
    </div>
    <label><input type="radio" name="pickupMethod" value="課後照顧班"> 課後照顧班</label>
  </div>

  <button type="submit">送出</button>
</form>

<div id="successMessage">✅ 資料已送出</div>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const afterSchoolFields = document.getElementById("afterSchoolFields");
  document.querySelectorAll('input[name="pickupMethod"]').forEach(el => {
    el.addEventListener("change", function() {
      afterSchoolFields.style.display = (this.value === "安親班") ? "block" : "none";
    });
  });

  document.getElementById('studentForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const formData = new FormData(this);
    const data = {};
    formData.forEach((value, key) => { data[key] = value });

    fetch("https://script.google.com/macros/s/AKfycby9ztjUUrR5THg32_h3F_e0LrX9n3FL3aHqW4_90t_xYvJnDr3PbzBGz4vkaw1DiZbA/exec", {
      method: 'POST',
      body: JSON.stringify(data),
      headers: { 'Content-Type': 'application/json' }
    })
    .then(res => res.text())
    .then(() => {
      document.getElementById('successMessage').style.display = 'block';
      this.reset();
      afterSchoolFields.style.display = 'none';
    })
    .catch(err => console.error('送出失敗', err));
  });
});
</script>

</body>
</html>
